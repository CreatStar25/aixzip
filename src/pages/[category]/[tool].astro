---
import { tools } from '../../config/tools';
import Layout from '../../layouts/Layout.astro';
// ✅ 引入分发组件
import ToolDispatcher from '../../components/tools/ToolDispatcher.jsx';

export function getStaticPaths() {
  return tools.map((t) => ({
    params: { category: t.category, tool: t.id },
    props: { toolConfig: t },
  }));
}

const { tool } = Astro.params;
const { category } = Astro.params;

const toolName = tool.split('-').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
---

<Layout title={`${toolName} - Free Online Tool`} lang="en">
  <main class="min-h-screen py-12 bg-slate-50">
    <div class="max-w-5xl mx-auto px-4">
      
      <nav class="text-sm text-slate-500 mb-6 capitalize flex items-center gap-2">
        <a href="/" class="hover:text-blue-600">Home</a> 
        <i class="fa-solid fa-chevron-right text-[10px] text-slate-300"></i>
        <span>{category}</span>
        <i class="fa-solid fa-chevron-right text-[10px] text-slate-300"></i>
        <span class="text-slate-900 font-bold">{toolName}</span>
      </nav>

      <div class="bg-white rounded-2xl shadow-xl overflow-hidden min-h-[500px] border border-slate-100">
        {/* ✅ 使用分发组件 */}
        <ToolDispatcher toolId={tool} lang="en" client:load />
      </div>

      <article class="prose lg:prose-xl mx-auto mt-16 text-slate-600">
        <h1>Free Online {toolName}</h1>
        <p>Use our free tool to process your {category} files...</p>
      </article>

    </div>
  </main>
</Layout>